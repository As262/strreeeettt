(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[420],{20842:function(t,e,r){Promise.resolve().then(r.bind(r,54611))},54611:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return i}});var a=r(57437),n=r(2265),l=r(29116);function i(){let[t,e]=(0,n.useState)([]),[r,i]=(0,n.useState)({title:"",description:"",category:"",image:null,latitude:0,longitude:0,address:""});(0,n.useEffect)(()=>{(async()=>{let{data:t}=await l.x.getCategories();t&&e(t)})()},[]);let o=async t=>{t.preventDefault();let e=new FormData;Object.entries(r).forEach(t=>{let[r,a]=t;null!==a&&("image"===r&&a instanceof File?e.append(r,a):"image"!==r&&e.append(r,a))});let{data:a,error:n}=await l.x.createReport(e);a?(alert("Report submitted successfully!"),i({title:"",description:"",category:"",image:null,latitude:0,longitude:0,address:""})):alert("Error submitting report: "+n)};return(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{children:"Report an Issue"}),(0,a.jsxs)("form",{onSubmit:o,children:[(0,a.jsx)("label",{htmlFor:"title",children:"Title"}),(0,a.jsx)("input",{id:"title",type:"text",value:r.title,onChange:t=>i({...r,title:t.target.value}),className:"w-full p-2 border rounded",required:!0}),(0,a.jsx)("label",{htmlFor:"category",children:"Category"}),(0,a.jsxs)("select",{id:"category",value:r.category,onChange:t=>i({...r,category:t.target.value}),className:"w-full p-2 border rounded",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select a category"}),t.map(t=>(0,a.jsx)("option",{value:t.slug,children:t.name},t.slug))]}),(0,a.jsx)("label",{htmlFor:"description",children:"Description"}),(0,a.jsx)("textarea",{id:"description",value:r.description,onChange:t=>i({...r,description:t.target.value}),className:"w-full p-2 border rounded h-32",required:!0}),(0,a.jsx)("button",{type:"submit",className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded",children:"Submit Report"})]})]})}},29116:function(t,e,r){"use strict";async function a(){try{let t=await fetch("".concat("http://localhost:8000/api","/dashboard/stats/"),{credentials:"include"});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));return{data:await t.json(),error:null}}catch(t){return{data:null,error:t}}}r.d(e,{x:function(){return n},z:function(){return a}});let n={async getCategories(){try{let t=await fetch("".concat("http://localhost:8000/api","/categories/"),{credentials:"include"});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));return{data:await t.json(),error:null}}catch(t){return{data:null,error:t}}},async createReport(t){try{let e=await fetch("".concat("http://localhost:8000/api","/reports/"),{method:"POST",body:t,credentials:"include"});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));return{data:await e.json(),error:null}}catch(t){return{data:null,error:t}}}}}},function(t){t.O(0,[971,117,744],function(){return t(t.s=20842)}),_N_E=t.O()}]);